<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
   <title>cajo - The cajo project</title>
   <meta name="Keywords" content="cajo, rmi, java, distributed computing,
      Transparent Distributed Computing, network computing, cajo project,
      cajo framework, wwvm, John Catherino">
   <meta name="Description" content="Cajo Distributed Application Framework">
   <meta name="Author" content="John Catherino">
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <link href="ventro/css.css" rel="stylesheet" type="text/css">
</head>

<body>

<table width="98%" border="0" cellpadding="0" cellspacing="0">
   <tr>
      <table width="100%" height="67"  border="0" cellpadding="4" cellspacing="0">
         <tr>
            <td background="ventro/vert_logobarbg.gif">
               <table width="100%" height="47"  border="0" cellpadding="4" cellspacing="0">
                  <tr><br>
                     <td width="85" valign="bottom">
                        <div align="right">
                           <img src="ventro/cajologo.gif" alt="the cajo project"
                              title="cajo: free dynamic transparent distributed computing"
                              width="61" height="34">
                           <img src="ventro/blank.gif" width="6" height="8">
                        </div>
                     </td>
                     <td width="10"><img src="ventro/seperatorline.gif" width="1" height="38"></td>
                     <td style="vertical-align:middle">
                        <span class="style8">
                           <font size="+1">
                              <b>Free, simple, powerful: Transparent Distributed Computing</b>
                           </font>
                        </span>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>


<!-- page body: -->

      <table border="0" cellspacing="0" cellpadding="4">
         <tr>
            <td height="331" valign="top" bgcolor="#FFFFFF">
               <td width="100%" valign="top" bgcolor="#FFFFFF">
                  <table width="100%" border="0" cellpadding="4" cellspacing="0" bgcolor="#FFFFFF">
                     <tr>
                        <td>
                           <table width="100%" height="35" border="0" cellpadding="0" cellspacing="0">
                              <tr>
                                 <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                                 <td width="100%" background="ventro/bar_bg.gif">
                                    <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                                       <tr>
                                          <td style="vertical-align:middle">
                                             <span class="style8 style12">
<!-- main page title bar -->                    <div align="left">Adding cajo to existing applications</div>
                                             </span>
                                          </td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
                              </tr>
                           </table>
                           <table width="95%" height="96" border="0" cellpadding="9" cellspacing="0">
                              <tr>

                                 <td valign="top">
                                    <span class="spacing style4 style7 style9">
                                      It is very easy to incorporate the cajo framework into applications. As you
                                      will see very shortly; making an object in your application remotely
                                      accessible, or obtaining a reference to an object in a remote application,
                                      can be done with as little as <i>one</i> additional line of code!<br><br>

                                      Take for example, the following simple object:

<blockquote><tt><pre>
public class SomeObject {
   protected String string;
   protected int stuff;
   public String foo() { return string; }
   public void bar(String string, int stuff) {
      this.string = string;
      this.stuff = stuff;
   }
   public String baz(String string) {
      try { return this.string; }
      finally { this.string = string; } // fun (:
   }
}
</tt></pre></blockquote>

                                    </span>
                                 </td>
                              </tr>
                           </table></td>
                        </tr>
                     </table>

<!-- begin regular section -->

            <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
               <tr>
                  <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                  <td width="98%" valign="top" background="ventro/bar_bg.gif">
                     <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                           <td style="vertical-align:middle">
                              <span class="style8"><b>Remote binding and linking</b></span>
                           </td>
                        </tr>
                     </table>
                  </td>
                  <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
               </tr>
            </table>
            <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
               <tr>
                  <td valign="top">
                     <span class="spacing style4 style7 style9">
                        One of the most important aspects of the cajo framework is that it does not
                        require any changes to <u>your</u> objects, in order to use them remotely.
                        Even if your application already uses some other distributed framework; it
                        is very easy to <i>drop-in</i> cajo support, and increase your distributed
                        user base. To make an object remotely available, the framework provides two
                        distinct options; these are known collectively as <i>static</i>, and
                        <i>dynamic</i> binding. Both may even be used on the same object.<br><br>

                        Static binding is accomplished by calling the static <tt><a href=nonav/docs/gnu/cajo/utils/ItemServer.html#bind(java.lang.Object,%20java.lang.String)>
                        bind</a></tt> method, of the <tt><a href=nonav/docs/gnu/cajo/utils/ItemServer.html>
                        ItemServer</a></tt> class. This type of binding will require the client to
                        know the address of the server in order to obtain a reference to the object.
                        Clients statically link to a remote object using the static <tt><a href=nonav/docs/gnu/cajo/invoke/Remote.html#getItem(java.lang.String)>
                        getItem</a></tt> method of the <tt><a href=nonav/docs/gnu/cajo/invoke/Remote.html>Remote</a>
                        class</tt>.<br><br>

                        Static binding and linking would look something like this:

                        <blockquote><tt>
                           Itemserver.bind(someObject, "someName"); // server side<br><br>

                           Object someObject = Remote.getItem("//serverName:<a href=gotcha.html#7 title="see item #7">serverPort</a>/someName"); // client side
                        </blockquote></tt><br>

                        Dynamic binding is accomplished by calling the <tt><a href=nonav/docs/gnu/cajo/utils/Multicast.html#announce(java.lang.Object,%20int)>
                        announce</a></tt> method, of the <tt><a href=nonav/docs/gnu/cajo/utils/Multicast.html>
                        Multicast</a></tt> class. This will <i>'broadcast'</i> the remote object reference
                        to <u>all</u> listening Virtual Machines. Clients dynamically link to a
                        remote object using the <tt><a href=nonav/docs/gnu/cajo/utils/Multicast.html#listen(java.lang.Object)>
                        listen</a></tt> method of the Multicast class.<br><br>

                        Dynamic binding and linking would look something like this:

                        <blockquote><tt>
                           Multicast.announce(someObject, 16); // server side<br><br>

                           Multicast.listen(someListener); // client side
                        </blockquote></tt><br>

                        In either case, once a remote reference to an object is obtained, it can be
                        used to invoke its <i>public</i> methods. The reference can also be passed to other
                        objects, including remote ones, as either an argument, or a return. It could
                        even be thrown in an Exception. Any object receiving this reference, can also
                        invoke its public methods. The reference can even be written to a file, using
                        the static <tt><a href=nonav/docs/gnu/cajo/invoke/Remote.html#zedmob(java.io.OutputStream,%20java.lang.Object)>
                        zedmob</a></tt> method of the Remote class, for later use, even by a
                        different program. Note however; the exposed object's public methods are
                        <i>not</i> synchronized, meaning that they can be invoked reentrantly by
                        clients. Just as with local objects; synchronizing methods can cause
                        significant client performance impacts. It is best to synchronize only the
                        smallest possible blocks of code that require protection to be threadsafe.<br><br>

                        Consider for a moment the useful network resource created simply by a
                        <i>single-line</i> of code remoting a <a href=http://java.sun.com/j2se/1.4.2/docs/api/java/util/Hashtable.html>
                        Hashtable</a> for instance...
                     </span>
                  </td>
               </tr>
            </table>
<!-- end regular section -->

<!-- begin regular section -->
            <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
               <tr>
                  <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                  <td width="98%" valign="top" background="ventro/bar_bg.gif">
                     <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                           <td style="vertical-align:middle">
                              <span class="style8"><b>Dynamic method invocation</b></span>
                           </td>
                        </tr>
                     </table>
                  </td>
                  <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
               </tr>
            </table>
            <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
               <tr>
                  <td valign="top">
                     <span class="spacing style4 style7 style9">
                        <tt><a href=nonav/docs/gnu/cajo/invoke/Remote.html#invoke(java.lang.Object,%20java.lang.String,%20java.lang.Object)>
                        Invoke</a></tt> is the cajo architecture approach to dynamic method
                        invocation, supplemented by the use of Java reflection. It is the foundation
                        of the framework. It can be used to invoke <i>any</i> public method, on
                        <i>any</i> object; on both local <u>and</u> remote objects.<br><br>

                        The static method has the following signature:

                        <blockquote><tt>
                           Object Remote.invoke(Object object, String method, Object args) throws Exception;
                        </tt></blockquote>

                        The <i>object</i> argument is the object on which to operate. The
                        <i>method</i> argument is the name of the public method to be invoked.
                        The <i>args</i> argument represents the argument(s) to be provided to the
                        method, if any. Multiple arguments are represented when <i>args</i> is an
                        Object array. A null <i>args</i> value indicates no arguments. The method's
                        result is the object returned from the method invocation, if any. The method
                        declares that it throws <i>Exception</i>, to allow the called method the
                        freedom to throw any type of Exception, <i>including</i> none at all. This
                        is also used to cover network related failures for invocations on remote
                        objects.<br><br>

                        Consider for a moment just this one small example of the power in dynamic
                        method invocation:
                        <blockquote>
                        A GUI could allow the user to select arguments from a collection, and
                        type in the name of the host, the object, and the method; then view the
                        results. <u><i>All</i></u> at runtime!
                        </blockquote>
                     </span>
                  </td>
               </tr>
            </table>
<!-- end regular section -->

<!-- begin regular section -->
            <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
               <tr>
                  <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                  <td width="98%" valign="top" background="ventro/bar_bg.gif">
                     <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                           <td style="vertical-align:middle">
                              <span class="style8"><b>Type safety</b></span>
                           </td>
                        </tr>
                     </table>
                  </td>
                  <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
               </tr>
            </table>
            <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
               <tr>
                  <td valign="top">
                     <span class="spacing style4 style7 style9">
                        Now it might appear that all type safety has been completely abandoned; looking
                        somewhat like a return to the C language. However, what has really happened
                        is that strong typechecking had to move, necessarily, from compile time, to
                        run time. If there is no mappable signature, the invocation will result in
                        a <tt>NoSuchMethodException</tt>.<br><br>

                        There is however, an <i>extremely</i> useful technique, to restore compile
                        time typechecking; it is called a <tt><a href=nonav/docs/gnu/cajo/utils/extra/Wrapper.html>
                        wrapper</a></tt> class.<br><br>

                        If a client already knows the interface to a remote object; it can define
                        a wrapper class, to wrap the remote reference, and provide a compile time
                        type safe interface to it.<br><br>

                        Generically wrapping our previous example:

<blockquote><tt><pre>
import java.rmi.RemoteException;

public class WrapperObject {
   protected Object obj;
   public WrapperObject() {
      // obj = new SomeObject(); // when local, or...

      try { obj = Remote.getItem("//serverName:serverPort/someName"); }
      catch(RemoteException rx) { /* network exception */ }
      catch(Exception x) { /* instantiation exception */ }
   }
   public String foo() {
      try { return (String)Remote.invoke(obj, "foo", null); }
      catch(RemoteException rx) { /* network exception */ }
      catch(Exception x) { /* method exception */ }
   }
   public void bar(String string, int stuff) {
      try { Remote.invoke(obj, "bar", new Object[] { string, stuff }); }
      catch(RemoteException rx) { /* network exception */ }
      catch(Exception x) { /* method exception */ }
   }
   public String baz(String string) {
      try { return (String)Remote.invoke(obj, "baz", string); }
      catch(RemoteException rx) { /* network exception */ }
      catch(Exception x) { /* method exception */ }
   }
}
</pre></tt></blockquote>

                        Note the network exception catch blocks. A remote invocation <i>can</i>
                        fail unexpectedly; yet it would not occur when the wrapped object reference
                        is local. The wrapper architecture facilitates the simple insertion of
                        <i>extremely</i> powerful supplemental functionality; such as retry, caching,
                        monitoring, notification, logging, measurement, debug, testing, validation,
                        rollback, load balancing, fail-over, etc.<br><br>

                        It is important to remember that since the Remote.invoke method works
                        on <u>both</u> local, <i>and</i> remote objects; the wrapper technique
                        provides a client the ability to <i>transparently</i> scale, from local
                        object interaction, to remote; <i>without</i> affecting the remaining source
                        code. It even provides the flexibility to change its wrapped object from
                        local, to remote, or to a different server; <i>even</i> at runtime. It
                        <i>also</i> allows the server the flexibility to return a remote reference,
                        a locally running <a href=proxy.html>proxy</a>, or a completely local
                        object, without breaking the client's code. It is powerful stuff!
                     </span>
                  </td>
               </tr>
            </table>
<!-- end regular section -->
<!-- begin regular section -->
   <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="98%" valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Conclusion</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               The diagram below illustrates the options for receiving and exposing object
               references from a Virtual Machine:<br><br>

               <center><img src=ventro/diagram_overview.jpeg alt="cajo object linking"
                  title="overview of the cajo project"></center>

               Given the transparency of this framework, you will quickly find it <i>so</i>
               easy to distribute your applications; you will practically forget the
               framework is even there!<bt><br>

               All this functionality; and a <u><i>lot</i></u> more: &nbsp;From a codebase
               of less than 40<b><u>k</u></b>B!<br><br>

               Its simplicity, flexibility, and
               <i>performance</i>, offer quite an exciting change from the more enormous,
               complex, and heavyweight, distributed frameworks out there.<br><br>

               Then, once you are up to speed: You will be delighted to discover that the
               framework is also completely <a href=http://wiki.java.net/bin/view/Communications/CajoScripting>
               scriptable</a>; and has a simple, yet very powerful, mobile <a href=http://wiki.java.net/bin/view/Communications/ProxyUsage>
               proxy</a> mechansim!</a>
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- footer: -->
   <table width="95%" height="56" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <div align="center">
               <hr width=90%">
               <span class="spacing style4 style7 style9">
                  The cajo framework does not dictate your architecture: It <i>simply</i> drops-in!
               </span>
            </div>
         </td>
      </tr>
   </table><br>

   <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="95%" valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style11">&copy; 2004 GNU FDL</span>
                  </td>
                  <td width="53%"><div align="right"></div></td>
               </tr>
            </table>
         </td>
               <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
            </tr>
         </table>
      </td>
   </tr>
   </table>
         </td>
      </tr>
   </table>

</body>
</html>
