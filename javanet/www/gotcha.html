<html>
   <head>
      <title>The CaJo Project</title>
      <meta name="Keywords" content="cajo, rmi, java, distributed computing, Transparent Distributed Computing">
      <meta name="Description" content="Cajo Distributed Application Framework">
      <meta name="Author" content="John Catherino">
   </head>
   <body>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td><img src="images/topl.gif" width="17" height="17" border="0"></td>
            <td width="100%" bgcolor="#8C6239"><img src="images/dot.gif" width="1" height="1" border="0"></td>
            <td><img src="images/topr.gif" width="17" height="17" border="0"></td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="100%" height="15" bgcolor="#8C6239">
               <img src="images/dot.gif" width="1" height="1" border="0">
            </td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="120" valign="top">
               <table width="120" border="0" cellspacing="2" cellpadding="2" align="left">
<!-- begin table.html -->
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="index.html" title="cajo home page"><b>Welcome</b></a><br>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="tutorial.html" title="getting started"><b>Tutorial</b></a>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="theory.html" title="how it all works"><b>Theory</b></a>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#FFFFC8">
                        <b><u>Gotchas</u></b>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="faq.html" title="common questions"><b>FAQ</b></a>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="acknowlege.html" title="supporters of the marque"><b>Acknowledgments</b></a>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="license.html" title="what's the LGPL"><b>License</b></a>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <a href="docs/overview-summary.html" title="package documentation"><b>Javadocs</b></a>
                     </td>
                  </tr>
<!-- end table.html -->
               </table>
            </td>
            <td width="100%" valign="top">
               <table width="100%" cellpadding="5" border="0">
                  <tr>
                     <td>
<!-- begin main.html -->
                           <font size="4">
                              <b>Common mistakes to be avoided.</b><br><br>
                           </font>

                           This page will stand as a living document, fueled by the feedback of
                           developers.  It's easy to become highly proficient at this library, and
                           completely forget all the initial frustrations in getting it to work the
                           first time.  Therefore, I would like to ask the community to please send
                           in reports of odd things that have gone wrong.  Often these <i>'pearls from
                           tears'</i> can be as useful for learning as the source documentation itself.

                           <br><br>In that spirit, I'll do the honor of the first one...<br><br>

                           
                           <b><u>1. Argument Types:</u>
                           <strike></b> When executing an inovke method on an item,
                           Java reflection requires the argument types to match exactly.  Unfortunately
                           reflection does not recognize inheritance trees.  For example, if class B
                           extends class A, and an item method declares an argument of type A, you
                           cannot send it an object of type B and have it work!-(  This results in the
                           much dreaded <b><code>NoSuchMethodException</code></b>; if you haven't got
                           one yet, you probably will soon.  This gotcha can be so inconvienient that
                           the framework makes a special case for Objects extending the Invoke
                           interface.  They are always typecast into Invoke. Therefore: to receive a
                           local, remote, or proxy item reference, a method signature must declare
                           the argument to be of type Invoke.</strike><br><br>

                           <u><b>*What wonderful news!</b></u> Today (08-Jan-04) a <i>significant</i>
                           improvement to the project codebase was uploaded, which completely
                           <u>eliminates</u> this <i>"gotcha"</i>. It was most generously provided by
                           project member <b>frelars</b> (aka Fredrik Larsen), with assistance by
                           project member <b>li_ma</b> (aka Li Ma). It will traverse argument
                           inheritance trees to find the best fitting method. It is a 'stunning'
                           improvement, and removes the <u>most common problem</u> encountered by users.
                           <b>Well done!</b><br><br>

                           <b><u>2. Long delays:</u></b> When a remote invocation takes a really long time
                           for everything, there is a common problem.  RMI attempts to do a reverse-DNS
                           lookup before each invocation. In theory, this is for security purposes. When
                           trying to match IP addresses to host names, a DNS timeout can add up to
                           several minutes to each invocation. If you do not have a DNS server to
                           resolve the addresses to names, it is necessary to revert back to the <i>'old
                           way'</i>, i.e. the hosts file.  This is a text file containing address/host
                           name pairs, which the system will check first, before attempting a DNS lookup
                           over the network.<br><br>

                           On *nix boxes (Solaris/Unix/Linux/BSD) the file is typically located at:
                           <b>/etc/hosts</b><br>
                           On Windows boxes, it is usually: <b>\WINNT\system32\drivers\etc\hosts</b><br><br>

                           Here you would put the IP address/host name pairs for the machines involved,
                           which do not have a DNS support.<br><br>

                           <b><u>3. Nework Reality:</u></b> While it is very simple to write code without
                           regard to locality or remoteness of objects, it is very important to remember
                           that any remote invocation can fail, or block for a very long time, if there
                           is a problem with the network, or the target machine is unresponsive. The
                           invoke interface is declared to throw an exception for two good reasons; one
                           is logical, i.e. the invocation is invalid, the other is genuinely
                           exceptional, i.e. something unexpected happened.<br><br>

                           These realities can be managed in three different ways. First, when dealing
                           with a remote item reference, your code should be prepared for unexpected
                           network exceptions, and long transaction delays. Second, a proxy can be sent
                           which manages these error conditions when calling its remote sender. (This
                           makes life very nice for the user) Third, when it absolutely positively
                           cannot go wrong, a proxy can be sent containing all of its necessary
                           functionality, and makes no use of its remote link back to its sender.<br><br>

                           Lastly, I find it extremely helpful to print, frame, memorize, and post
                           somewhere near your monitor, the eight
                           <a href=http://web.archive.org/web/20030208015752/http://java.sun.com/people/jag/Fallacies.html>fallacies</a>
                           of distributed computing.<br><br>

                           <b><u>4. Firewalled Clients:</u></b> Very often a client item is operating
                           behind a firewall that prohibits inbound socket connections. If server
                           callbacks are necessary for the design, this posed a real problem. Project
                           member Fredrik Larsen proposed a method whereby the client would periodically
                           check for server callbacks, thus allowing both inbound and outbound
                           asynchronous calls on a single outbound client socket. To accomplish this, a
                           server would create a
                           <a href=https:files/documents/974/3597/ClientProxy.java>ClientProxy</a>
                           object, to locally represent a callable reference to the client item. Next it
                           would extract an
                           <a href=https:files/documents/974/3598/ItemProxy.java>ItemProxy</a> from the
                           ClientProxy, to give to the client. The client registers itself as a listener
                           with this object, and will receive the asynchronous callbacks made by the
                           server through its ClientProxy object. It allows object design without regard
                           for the firewall issue.<br><br>

                           <div align="center">
                              <font size="-2">
                                 <hr width="80%">
                                 A place to remember common mistakes, in order to make them less common.
                              </font>
                           </div>
<!-- end main.html -->
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
   </body>
</html>
