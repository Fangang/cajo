<html>
   <head>
      <title>The CaJo Project</title>
      <meta name="Keywords" content="cajo, rmi, java, distributed computing">
      <meta name="Description" content="Cajo Distributed Application Framework">
      <meta name="Author" content="John Catherino">
   </head>
   <body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800000" alink="#FF0000">
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td><img src="images/topl.gif" width="17" height="17" border="0"></td>
            <td width="100%" bgcolor="#8C6239"><img src="images/dot.gif" width="1" height="1" border="0"></td>
            <td><img src="images/topr.gif" width="17" height="17" border="0"></td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="100%" height="15" bgcolor="#8C6239">
               <img src="images/dot.gif" width="1" height="1" border="0">
            </td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="120" valign="top">
               <table width="120" border="0" cellspacing="2" cellpadding="2" align="left">
<!-- begin table.html -->
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="index.html" title="cajo home page"><b>Welcome</b></a><br>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="tutorial.html" title="getting started"><b>Tutorial</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="theory.html" title="how it all works"><b>Theory</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="gotcha.html" title="important details"><b>Gotchas</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="faq.html" title="common questions"><b>FAQ</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="acknowlege.html" title="supporters of the marque"><b>Acknowlegements</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="license.html" title="what's the LGPL"><b>License</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="docs/overview-summary.html" title="package documentation"><b>Javadocs</b></a>
                        </font>
                     </td>
                  </tr>
<!-- end table.html -->
               </table>
            </td>
            <td width="100%" valign="top">
               <table width="100%" cellpadding="5" border="0">
                  <tr>
                     <td>
                        <font face="Verdana, Helvetica" size="-1">
<!-- begin main.html -->
                           <font face="Verdana, Helvetica" size="4">
                              <b>Inside the standard graphical client application.</b>
                           </font><br><br>

                           The
                           <a href=docs/gnu/cajo/invoke/Client.html>gnu.cajo.invoke.Client</a>
                           class operates in two fundamentally different, but functionally complementary
                           ways.<br><br>

                           One way it runs is as an applet.  The applet, upon loading by a Java
                           enabled browser, will connect back to its host and request either the
                           default proxy, or the one specified in the applet tag.  It will store the
                           reference to the proxy returned, to prevent it from being garbage collected.
                           Next it will initialize the proxy, calling its invoke method with an argument
                           of "init" and providing a reference to the proxy, remoted within the context
                           of the plug-in's VM.  Finally, the return of this proxy invocation,
                           cannonically a descendant of java.awt.Component, is added to the applet's
                           panel.  This allows a single client to host an unlimited variety of
                           graphical application proxies, with all code provided by the server.<br><br>

                           The server can fully configure the applet using its parameters, specified in
                           the tag.  The client can provide three of the optional configuration
                           parameters:
                           <ul>
                              <li><b>clientPort</b>: The port on which to communicate with the proxy
                              <li><b>localPort</b>:  The client's internal port number, if translated
                              <li><b>proxyName</b>:  The name of the proxy to request from the server
                           </ul>
                           Normally the default settings will work fine, unless either the client is
                           behind NAT/Firewall, or wants a specific proxy other than the default.
                           The client can tell the server how to set these items via the URL it uses to
                           request the applet. It uses the following syntax:
                           <pre><code>   http://host[:port]/[clientPort][:localPort][-proxyName]</code></pre>
                           The parameters in brackets can be selectively omitted, but the order of
                           arguments is required.<br><br>

                           The class also can operate as an application. In this case, it provides two
                           distinct capabilities. First it creates a remotely accessible proxy hosting
                           item.  This item accepts invocations with an argument of either a proxy, or
                           a remote reference.  If the item is a proxy, it will initialize it in a
                           similar manner as the applet does, and if the invocation result is derived
                           from either Component or JComponent, it will create a frame on the client
                           displaying the result.  It the provided argument is a remote item, it
                           will invoke a "getProxy" request, with no argument, if the result is a
                           graphical component, it will display it in a frame on the client. The second
                           optional function, provided by the client is to additionally go to load an
                           initial proxy item.<br><br>

                           The application takes up to five optional
                           parameters.  They are in order, from  most often changed, to least often,
                           because to change an option, all of the  previous options must also be
                           specified; both order and precedence count. Here are the options:
                           <ul>
                              <li> The client's external host name, if it's using NAT
                              <li> The client's external port number, if it's behind a firewall
                              <li> The client's internal host name, if it has multiple interfaces
                              <li> The client's internal port number, if it's using translation
                              <li> The URL where to load the intial proxy item
                           </ul>
                           The last option has six possibilities to load a proxy:
                           <ul>
                              <li> <b>http://</b> to load it from a web server
                              <li> <b>ftp://</b> to load it from an ftp server
                              <li> <b>file://</b> to load it from the local disc
                              <li> <b>path/name</b> to instantiate it from a local class file
                              <li> <b>/path/name</b> to load it as a serialized proxy from disc
                              <li> <b>//host[:port]/[name]</b> to load it from a cajo proxy server
                           </ul>

                           <b><u>Very Important:</u></b> This class, when run as an application, is
                           intended for testing and development purposes. In an untrusted environment
                           it is <u>extremely unsafe</u> to run by default. To make its use for
                           development easier; the client application employs a
                           <a href=docs/gnu/cajo/invoke/NoSecurityManager.html>NoSecurityManager</a>.
                           As its name implies, this allows any loaded proxy to do anything it wants on
                           the host's physical machine. Under some circumstances granting proxy
                           items full permissions may be exactly what is needed; on kiosks, or thin client
                           machines, on a protected newtork, for example.  It has an advantage it that
                           it allows the client to run simply as a single jar file, no security policy
                           file is even needed.<br><br>

                           To protect the host in untrusted environments, it is <u>necessary</u> to
                           start this application with a security policy installed. This would require
                           an invocation such as the following:

                           <pre><code> java -jar -Djava.security.manager -Djava.security.policy=someURL client.jar</pre></code>

                           The file referenced by the URL (or simply path/filename) would clearly define
                           what permissions the downloaded proxies would have.  For example, the
                           following policy file, is highly restrictive, but suitable for most proxies:<code><pre>
grant {
   permission java.net.SocketPermission "*:1024-", "accept;
   permission java.net.SocketPermission "*", connect;
};</code></pre>
                           This only allows loaded proxies to create server sockets on any available
                           port over 1023, and connect to any server on any port.  It's a little
                           more generous than the applet sandbox, but still safe for untrusted code.
                           <i>Note:</i> be very sure to use the first -D argument, you don't want to
                           make the same
                           <a href=http://developer.java.sun.com/developer/bugParade/bugs/4915879.html>
                           mistake</a> I did. (essentially, omission of the first, negates the second
                           argument)<br><br>

                           One more detail; by design, the client is vulnerable to a denial of service
                           attack.  While unlikely, a malicious server could flood the virtual machine
                           with so many proxies that it crashes.  However with proper security
                           installed, no harm would come to the host machine. Nothing can be done
                           about this; it's an inherent risk of hosting untrusted foreigh code... just
                           so you know.<br><br>

                           Lastly, as with all classes in the invoke package, they have no knowlege of
                           the existence of the
                           <a href=docs/gnu/cajo/utils/utils/package-summary.html>utils</a>
                           package. All that is required to build a client of your own, is the invoke
                           package, and those application specific classes to your extension.  The utils
                           package exists solely for the purpose of creating server and proxy items,
                           and their server applications.<br><br>

                           <br>
                           <div align="center">
                              <font face="Verdana, Helvetica" size="-2">
                                 <hr width="80%">
                                 A useful utility in its own right, it is especially handy during development.
                              </font>
                           </div>
<!-- end main.html -->
                        </font>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
   </body>
</html>
