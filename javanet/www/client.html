<html>
   <head>
      <title>The CaJo Project</title>
      <meta name="Keywords" content="cajo, rmi, java, distributed computing">
      <meta name="Description" content="Cajo Distributed Application Framework">
      <meta name="Author" content="John Catherino">
   </head>
   <body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800000" alink="#FF0000">
<div id="projecthome" class="app">
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td><img src="images/topl.gif" width="17" height="17" border="0"></td>
            <td width="100%" bgcolor="#8C6239"><img src="images/dot.gif" width="1" height="1" border="0"></td>
            <td><img src="images/topr.gif" width="17" height="17" border="0"></td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="100%" height="15" bgcolor="#8C6239">
               <img src="images/dot.gif" width="1" height="1" border="0">
            </td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="120" valign="top">
               <table width="120" border="0" cellspacing="2" cellpadding="2" align="left">
<!-- begin table.html -->
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="index.html" title="cajo home page"><b>Welcome</b></a><br>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="tutorial.html" title="getting started"><b>Tutorial</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="theory.html" title="how it all works"><b>Theory</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="gotcha.html" title="important details"><b>Gotchas</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="faq.html" title="common questions"><b>FAQ</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="acknowlege.html" title="supporters of the marque"><b>Acknowlegements</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="license.html" title="what's the LGPL"><b>License</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="docs/overview-summary.html" title="package documentation"><b>Javadocs</b></a>
                        </font>
                     </td>
                  </tr>
<!-- end table.html -->
               </table>
            </td>
            <td width="100%" valign="top">
               <table width="100%" cellpadding="5" border="0">
                  <tr>
                     <td>
                        <font face="Verdana, Helvetica" size="-1">
<!-- begin main.html -->
                           <font face="Verdana, Helvetica" size="4">
                              <b>Inside the cajo graphical client application.</b>
                           </font><br><br>

                           The
                           <a href=docs/gnu/cajo/invoke/Client.html>Client</a> class operates in two
                           fundamentally different, but functionally complementary ways.<br><br>

                           One way it runs is as an Applet.  The applet, upon loading by a Java
                           enabled browser, will connect back to its host and request either the
                           default proxy, or one specified in the applet tag. Next it will initialize
                           the proxy, by calling its init method, providing a reference to the proxy
                           remoted within the context of the plug-in's VM.  Finally, the return of this
                           proxy invocation, cannonically a descendant of java.awt.Container, is added
                           to the applet's panel.  This allows a single client to host an unlimited
                           variety of graphical application proxies, using only one client applet, with
                           <u>all</u> of the code provided by the server.

                           <h3>Applet Configuration</h3><br>

                           The server fully configures the applet using the parameters specified in
                           its tag.  The client can provide three of the optional configuration
                           parameters however:<br><br>

                           <table>
                              <tr>
                                 <td><b>proxyName</b></td>
                                 <td>The name of the proxy to request from the server</td>
                              </tr>
                              <tr>
                                 <td><b>clientPort</b></td>
                                 <td>The port on which to communicate with the proxy</td>
                              </tr>
                              <tr>
                                 <td><b>localPort</b></td>
                                 <td>The client's internal port number, if translated</td>
                              </tr>
                           </table><br>

                           Normally the default settings will work fine, unless either the client wants
                           a specific port because it is behind a firewall, or wants a specific proxy.
                           The client can tell the server how to set these parameters, via the URL it
                           uses to request the applet. The URL uses the following syntax:

                           <pre><code>   http://host[:port]/[clientPort][:localPort][-proxyName]</code></pre>

                           The parameters in brackets can be selectively omitted, but the order of
                           arguments is required.

                           <h3>Application configuration</h3><br>

                           The class can also operate as an application. In this case, it provides two
                           distinct capabilities. First it creates a remotely accessible proxy hosting
                           item.  This item accepts invocations with an argument of either a remote
                           reference, or a proxy. If the provided argument is a remote item, it will
                           first invoke getProxy() on it, to receive its proxy item. Either way, it will
                           initialize it in the identical manner as the applet does, and if the
                           initialization returns a Component (or JComponent), it will create a frame
                           (or JFrame) on the client machine, displaying the result. The second optional
                           function, provided by the client is to additionally load an initial proxy
                           item at startup.<br><br>

                           The application can take up to five optional parameters.  They are in order,
                           from  most often changed, to least often, because to change an option, all of
                           the  previous options must also be specified; i.e. both order and precedence
                           count.<br><br>

                           Here are the options:
                           <ul>
                              <li> The client's external host name, if it's using NAT
                              <li> The client's external port number, if it's behind a firewall
                              <li> The client's internal host name, if it has multiple interfaces
                              <li> The client's internal port number, if it's using translation
                              <li> The URL where to load the intial proxy item
                           </ul>
                           The last option has six possibilities to load a proxy:
                           <ul>
                              <li> http:// to load it from a web server
                              <li> ftp:// to load it from an ftp server
                              <li> file:// to load it from the local disc
                              <li> path/name to instantiate it from a local class file
                              <li> /path/name to load it as a serialized proxy from disc
                              <li> //host[:port]/[name] to load it from an rmiregistry
                           </ul>

                           <h3>Important Details</h3><br>

                           This client, when run as an application, is intended for testing and
                           development purposes in a trusted enviornment. It is <i>extremely unsafe</i>
                           to run on the Internet. To make its use for development purposes simpler,
                           the client application employs a
                           <a href=docs/gnu/cajo/invoke/NoSecurityManager.html>NoSecurityManager</a>.
                           As its name implies, this allows any loaded proxy to do anything it wants, on
                           the host's physical machine. Under some circumstances granting proxy
                           items full permissions may be exactly what is needed; on kiosks, or thin client
                           machines, on a protected newtork, for example.  It has an advantage it that
                           it allows the client to run simply as a single jar file, no security policy
                           file is even needed.<br><br>

                           To protect the host in untrusted environments, it is <u>necessary</u> to
                           start this application with a security policy installed. This would require
                           an invocation such as the following:

                           <pre><code>   java -jar -Djava.security.manager -Djava.security.policy=someURL client.jar</b></pre></code>

                           The file referenced by the URL (or simply path/filename) would clearly define
                           what permissions the downloaded proxies would have.  For example; the
                           following policy file, is highly restrictive, but suitable for most proxies:<code><pre>
grant {
   permission java.net.SocketPermission "*:1024-", "accept;
   permission java.net.SocketPermission "*", connect;
};</code></pre>
                           This only allows loaded proxies to create server sockets on any unused
                           port over 1023, and connect to any server on any port.  It's a little
                           more generous than an Applet sandbox, but still safe for untrusted code.
                           <i>Note:</i> be very sure to use the first -D argument, you don't want to
                           make the same
                           <a href=http://developer.java.sun.com/developer/bugParade/bugs/4915879.html target=_blank>
                           mistake</a> I did. (essentially, omission of the first argument, completely
                           negates the second)

                           <h3>Conclusion</h3><br>

                           Keep in mind, any client VM is vulnerable to a <i>denial of service attack</i>.
                           Though unlikely, a malicious server could flood the client's Virtual Machine
                           with so many proxies that it crashes.  However with proper security installed,
                           no real harm would come to the host machine. It's an inherent risk of hosting
                           mobile code... just so you know.<br><br>

                           Lastly, all classes in the <a href=docs/gnu/cajo/invoke/package-summary.html>
                           invoke</a> package have no knowlege of the existence of the
                           <a href=docs/gnu/cajo/utils/package-summary.html>utils</a> package. All that
                           is required to build a client of your own, is the invoke package, and your
                           application specific classes.  The utils package exists solely for the purpose
                           of creating server and proxy items, and server applications.<br><br>

                           <div align="center">
                              <font face="Verdana, Helvetica" size="-2">
                                 <hr width="80%">
                                 Client, a useful utility in its own right, especially handy during development.
                              </font>
                           </div>
<!-- end main.html -->
                        </font>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
   </body>
</html>
