<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_06) on Sat Nov 07 15:00:47 PST 2009 -->
<TITLE>
Xfile (The cajo project)
</TITLE>

<META NAME="keywords" CONTENT="gnu.cajo.utils.extra.Xfile class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="Xfile (The cajo project)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../gnu/cajo/utils/extra/Wrapper.html" title="class in gnu.cajo.utils.extra"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../gnu/cajo/utils/extra/Zedmobject.html" title="class in gnu.cajo.utils.extra"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?gnu/cajo/utils/extra/Xfile.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Xfile.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
gnu.cajo.utils.extra</FONT>
<BR>
Class Xfile</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>gnu.cajo.utils.extra.Xfile</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>Xfile</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class is used to transfer files between Java Virtual Machines.
 This class normally resides in the codebase of <i>both</i> the client,
 and the server. A client invokes only the static fetch method. This will
 implicitly use the open and nextBlock methods on the server Xfile object,
 to complete the transfer. A server simply instantiates, and remotes an
 Xfile object, to enable file transfers. For threadsafety; a server should
 give each client a <i>unique</i> instance of this class.<p>
 <i><u>Note</u>:</i> this object will try to send any file the client
 requests, therefore it should either be used by trusted clients, or with
 access priviliges appropriately locked down. Another option is to override
 the open method in a subclass, to check the requested resource against an
 approved list, throwing an exception if not.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0, 25-Jan-06 Initial release</DD>
<DT><B>Author:</B></DT>
  <DD>John Catherino</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../gnu/cajo/utils/extra/Xfile.html#remoteInvoke">remoteInvoke</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This field can allow the static fetch method to be invoked by a remote
 client.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../gnu/cajo/utils/extra/Xfile.html#Xfile(int)">Xfile</A></B>(int&nbsp;maxBlock)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The constructor simply sets the maximum transfer block size.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../gnu/cajo/utils/extra/Xfile.html#fetch(java.lang.Object, java.lang.String, java.lang.String)">fetch</A></B>(java.lang.Object&nbsp;item,
      java.lang.String&nbsp;source,
      java.lang.String&nbsp;dest)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the only method used by clients, it fetches the file from the
 specified source, and saves it to the specified destination.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../gnu/cajo/utils/extra/Xfile.html#nextBlock()">nextBlock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called by the client's static fetch method, to request
 subsequent blocks of the file, until the transfer is complete.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../gnu/cajo/utils/extra/Xfile.html#open(java.lang.String)">open</A></B>(java.lang.String&nbsp;source)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called by the client's static fetch method, to open a
 resource on a remote Java Virtual Machine.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="remoteInvoke"><!-- --></A><H3>
remoteInvoke</H3>
<PRE>
public static boolean <B>remoteInvoke</B></PRE>
<DL>
<DD>This field can allow the static fetch method to be invoked by a remote
 client. By default its value is false, prohibiting this functionality.
 Enabling this opens the possibility for a client to direct a server
 object to transfer a file into itself, from yet some other remote
 location, or even to transfer the data to yet another remote location.
 This is a heady concept; an Xfile object can operate simultaneously as
 a client, and a server; the implications are worthy of contemplation,
 before enabling.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Xfile(int)"><!-- --></A><H3>
Xfile</H3>
<PRE>
public <B>Xfile</B>(int&nbsp;maxBlock)</PRE>
<DL>
<DD>The constructor simply sets the maximum transfer block size.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>maxBlock</CODE> - The largest possible block to return from the
 nextBlock method. It is suggested not to exceed 64k bytes.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the max block argument is
 less than 256 bytes, or greater than 1MB.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="open(java.lang.String)"><!-- --></A><H3>
open</H3>
<PRE>
public void <B>open</B>(java.lang.String&nbsp;source)
          throws java.io.IOException</PRE>
<DL>
<DD>This method is called by the client's static fetch method, to open a
 resource on a remote Java Virtual Machine. Only one resource may be
 open at a time. If a resource is currently open when this method is
 called, the currently open resource stream will then be closed
 silently. If the server is deployed in a jar file, it will check within
 its jar first, to try to find the resource, before looking outside.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>source</CODE> - The resource to be loaded, typically the path and name
 of the file on the server's local filesystem.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If the specified resource does not exist, or
 cannot be opened.</DL>
</DD>
</DL>
<HR>

<A NAME="nextBlock()"><!-- --></A><H3>
nextBlock</H3>
<PRE>
public byte[] <B>nextBlock</B>()
                 throws java.io.IOException</PRE>
<DL>
<DD>This method is called by the client's static fetch method, to request
 subsequent blocks of the file, until the transfer is complete. It will
 transfer the number of bytes available from the stream, at the time of
 invocation, up to the maximum block size, specified in its constructor.
 It will close the source stream automatically, with the request of the
 final data block.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The next variably sized block from the source stream.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If a stream is not currently open, or if a read,
 or close error occurred.</DL>
</DD>
</DL>
<HR>

<A NAME="fetch(java.lang.Object, java.lang.String, java.lang.String)"><!-- --></A><H3>
fetch</H3>
<PRE>
public static void <B>fetch</B>(java.lang.Object&nbsp;item,
                         java.lang.String&nbsp;source,
                         java.lang.String&nbsp;dest)
                  throws java.lang.Exception</PRE>
<DL>
<DD>This is the only method used by clients, it fetches the file from the
 specified source, and saves it to the specified destination. It will
 first invoke the open method on the server item reference, it will
 then call nextBlock repeatedly, storing the results, until the entire
 file has been transferred. This method is synchronized, to provide
 threadsafety on the client side.<p>
 As a special case; the source and/or destination arguments can be URLs.
 <p>For example:<ul>
 <li>file://path/name.ext
 <li>http://host/path/name.ext
 <li>ftp://<i>[username:password@]</i>host/path/name.ext</ul><br>
 however, only as permitted by the SecurityPolicy of the client and
 server JVMs, and supported by their installed protocol handlers.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>item</CODE> - The object, presumably a remote reference to an Xfile
 object, with which to fetch the resource.<DD><CODE>source</CODE> - The file resource, typically the path and name of the
 file in the server's local filesystem, to be transferred.<DD><CODE>dest</CODE> - The resource, typically the path and name of the file
 in the clients's local filesystem, in which to transfer the data.
 If the destination is local, and the path does not exist, it will
 attempt to create it automatically.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If the source is invalid, the destination
 is invalid, or either could not be opened. If the destination
 already exists, it will be overwritten.
<DD><CODE>java.rmi.RemoteException</CODE> - If a remote method invocation,
 involved in the data transfer, fails.
<DD><CODE>java.lang.IllegalAccessException</CODE> - If this method is being invoked by a
 remote JVM, and remote invocation has not been enabled.
<DD><CODE>java.lang.Exception</CODE> - By the remote JVM, if the operation is not
 supported.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../gnu/cajo/utils/extra/Wrapper.html" title="class in gnu.cajo.utils.extra"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../gnu/cajo/utils/extra/Zedmobject.html" title="class in gnu.cajo.utils.extra"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?gnu/cajo/utils/extra/Xfile.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Xfile.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
