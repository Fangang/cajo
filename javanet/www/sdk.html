<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
   <title>The cajo project</title>
   <meta name="Keywords" content="cajo, rmi, java, distributed computing,
      Transparent Distributed Computing, network computing, cajo project,
      cajo framework, wwvm, John Catherino">
   <meta name="Description" content="Cajo Distributed Application Framework">
   <meta name="Author" content="John Catherino">
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <link href="ventro/css.css" rel="stylesheet" type="text/css">
</head>

<body>

<table width="98%" border="0" cellpadding="0" cellspacing="0">
   <tr>
      <table width="100%" height="67"  border="0" cellpadding="4" cellspacing="0">
         <tr>
            <td background="ventro/vert_logobarbg.gif">
               <table width="100%" height="47"  border="0" cellpadding="4" cellspacing="0">
                  <tr><br>
                     <td width="85" valign="bottom">
                        <div align="right">
                           <img src="ventro/cajologo.gif" alt="the cajo project"
                              title="cajo: free dynamic transparent distributed computing"
                              width="61" height="34">
                           <img src="ventro/blank.gif" width="6" height="8">
                        </div>
                     </td>
                     <td width="10"><img src="ventro/seperatorline.gif" width="1" height="38"></td>
                     <td style="vertical-align:middle">
                        <span class="style8">
                           <font size="+1">
                              <b>Free, simple, powerful: Transparent Distributed Computing</b>
                           </font>
                        </span>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>


<!-- page body: -->

      <table border="0" cellspacing="0" cellpadding="4">
         <tr>
            <td height="331" valign="top" bgcolor="#FFFFFF">
               <td width="100%" valign="top" bgcolor="#FFFFFF">
                  <table width="100%" border="0" cellpadding="4" cellspacing="0" bgcolor="#FFFFFF">
                     <tr>
                        <td>
                           <table width="100%" height="35" border="0" cellpadding="0" cellspacing="0">
                              <tr>
                                 <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                                 <td width="100%" background="ventro/bar_bg.gif">
                                    <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                                       <tr>
                                          <td style="vertical-align:middle">
                                             <span class="style8 style12">
<!-- main page title bar -->                    <div align="left">Overview of the cajo SDK</div>
                                             </span>
                                          </td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
                              </tr>
                           </table>
                           <table width="95%" height="96" border="0" cellpadding="9" cellspacing="0">
                              <tr>

                                 <td valign="top">
                                    <span class="spacing style4 style7 style9">
                                      <a href=https://cajo.dev.java.net>The cajo project</a> SDK provides a small
                                      yet detailed example of two important, yet independent concepts. One is to
                                      easily develop Rich Internet Applications; which can be launched as
                                      full-window/screen Applets, and via WebStart. The other is to provide a
                                      simple and powerful approach to dynamic distributed computing. The SDK is
                                      intended as a quick, but comprehensive introduction into the application and
                                      functionality of cajo.<br><br>

                                      The simple architecture of the SDK is the foundation; no detailed knowledge
                                      of the inner workings of the cajo library is necessary, as it makes no
                                      significant impact on the source code. Everything is plain-old Java, no
                                      special tools are needed, nor IDE plug-ins, nor other 3rd party libraries;
                                      not even a servlet container. The optional remote Graphical User Interfaces
                                      are just plain-old JComponents: your Swing learning investment is preserved.
                                      The cajo library takes care of presenting them in the browser, <i>and</i> as
                                      remote desktop applications.
                                    </span>
                                 </td>
                              </tr>
                           </table></td>
                        </tr>
                     </table>

<!-- begin regular section -->

            <table height="35" border="0" align="center" cellpadding="0" cellspacing="0">
               <tr>
                  <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                  <td valign="top" background="ventro/bar_bg.gif">
                     <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                           <td style="vertical-align:middle">
                              <span class="style8"><b>Architectural Overview</b></span>
                           </td>
                        </tr>
                     </table>
                  </td>
                  <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
               </tr>
            </table>
            <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
               <tr>
                  <td valign="top">
                     <span class="spacing style4 style7 style9">
                        The are three fundamental components:<ol>

                        <li><b>Services</b><br>
                        A Service is simply an ordinary Java object, all of whose public methods are
                        callable, from other remote objects. No special annotations are needed, nor
                        XML files, it is fully transparent. A service object furnishes interesting
                        functionality that other objects can use. A service may even use other
                        remote service objects to fulfill its functionality. A service is used to
                        distribute functional modules across multiple JVMs for improved performance,
                        scalability, and reliability.<br><br>

                        <li><b>Controllers</b><br>
                        A Controller is an object <u><i>requested by</i></u> a remote object, to
                        operate within its JVM. The controller arrives with a remote reference to its
                        sending service, and has no reference to its receiving object, as it is
                        strictly a servant. A controller is used to minimise network network traffic,
                        and improve performance; particularly when a lot of invocations are needed on
                        the sending service, or a lot of processing unique to the receiver is
                        necessary. A service can furnish as many controllers as it wishes, including
                        none, but typically only one.<br><br>

                        <li><b>Agents</b><br>
                        An agent is an object <u><i>sent to</i></u> a remote object, to operate
                        within its JVM. In essence it is the logical inverse of a controller. An
                        agent arrives with a remote reference to its sending service, <i>and</i> a
                        local reference to its receiving object. The sending service, in turn,
                        receives a remote reference to its agent. An agent is used to minimise
                        network traffic, and improve performance; particularly when a lot of
                        invocations are needed on the receiving object, or the data sets being
                        manipulated at the receiver are large. A service can provide as many types
                        of agents as it wishes, including none.<br><br>

                        In both cases, the receiving object views controllers and agents as local
                        <i>"intelligent stand-ins"</i> for the sending services. An object can, if
                        necessary, interact with a remote service neither using controllers, nor
                        accepting agents; or also in <i>addition</i> to using them.

<blockquote><pre>
Sending Service <---------- Controller <--- Receiving Object <i>(requested by)</i>
Sending Service <--------------> Agent ---> Receiving Object <i>(sent to)</i>
</pre></blockquote>

                        </ol>Ancillary components:<ul>

                        <li> <b>Server</b> A Java object furnishing one or more services.<br>
                        <li> <b>View</b> A JComponent optionally furnished by a controller. It
                        allows users to interact with a service, in a controlled manner.</ul>

                        A <a href=http://weblogs.java.net/blog/cajo/archive/2007/09/simple_interjvm.html>
                        cajo object</a> is provided to all components, this allows them to look up
                        services needed for assistance: <a href=https://cajo.dev.java.net/nonav/docs/gnu/cajo/Cajo.html#lookup(java.lang.Class)>
                        dynamically</a> by interface, as well as statically by server address.

                     </span>
                  </td>
               </tr>
            </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Class Diagramme</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               The following is a schematic of the cajo SDK architecture, fully implemented:<br><br>

               <center><img src="https://cajo.dev.java.net/files/documents/974/151769/SDK.png"
               alt="cajo sdk architecture model" title="cajo SDK class diagramme"></center>
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Source Code Examples</b></span> <i>(excerpted from the SDK)</i>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               <b>Example Service:</b>

<blockquote><tt><pre>
package service;

public class Service extends cajo.sdk.AbstractService implements IService {
   public Service(String name) throws Exception {
      super("controller.Controller", name); // service specific controller
      // use the cajo member object to connect to other services as needed
   }
   // this method can be called by remote JVMs
   public String foo(String bar) {
      if (bar != null) return "foo invocation completed for " + bar;
      throw new NullPointerException("null arg"); // for illustration
   }
}
</tt></pre></blockquote>

               <b>Example Controller:</b>

<blockquote><tt><pre>
package controller;

import view.View;
import java.util.concurrent.Future;

public class Controller extends cajo.sdk.AbstractController implements IController {
   // This is the controller's interface to its sending service.
   private interface homeInterface { // example interface
      String foo(String baz); // synchronous call
   // <a href=http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html>Future&lt;String&gt;</a> foo(String baz); // or call it asynchronously
   }
   // The reference to the sending service, to make callback invocations.
   private final HomeService homeService;
   // The reference to the the view object to listen to, and modify at runtime.
   private transient View view;
   public Controller(Object homeService) {
      this.homeService = proxy(homeService, HomeService.class);
   }
   // this method is called when the controller arrives at the remote JVM
   public void init(gnu.cajo.Cajo cajo) {
      super.init(cajo);
      System.out.println("Controller arrived at service!");
      // use the cajo object to connect to other services as needed
   }
   // this method is called by the receiving JVM to get the GUI view
   public cajo.sdk.AbstractView getView() throws java.io.IOException {
      // the view is hard-coded it could be read from a file, or a property
      view = new View();
      view.center.display("service call result:\n > ");
      try { view.center.display(baz("hello")); } // for illustration
      catch(Exception x) { x.printStackTrace(); }
      return view;
   }
   // this example method can be called by the sending and receiving JVM
   public String baz(String bar) {
      // return homeService.foo(null); // test error handling
      return homeService.foo(bar).toString();
   }
}
</tt></pre></blockquote>

               <b>Example Agent:</b>

<blockquote><tt><pre>
package agent;

import java.util.concurrent.Future;

public class Agent extends cajo.sdk.AbstractAgent implements IAgent {
   // This defines the agent's interface to its sending service.
   private interface HomeService {
   // Object foo(String bar); // synchronous call
      <a href=http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html>Future&lt;Object&gt;</a> foo(String bar); // or call it asynchronously
   }
   // This defines the agent's interface to its receiving service.
   private interface LocalService {
      String baz(String foo); // synchronous call
   // Future&lt;String&gt; baz(String foo); // or call it asynchronously
   }
   // This is the reference on which the agent will communicate with
   // its sending service.
   private final HomeService homeService;
   // This is the reference on which the agent will communicate with
   // its receiving service.
   private LocalService localService;
   public Agent(Object homeService) {
      this.homeService = proxy(homeService, HomeService.class);
   }
   // this method is called when the agent arrives at the receiver
   public void init(Object localService, gnu.cajo.Cajo cajo) {
      super.init(cajo, localService);
      this.localService = proxy(localService, LocalService.class);
      System.out.println("Agent arrived at service!");
      // use the cajo object to connect to other services as needed
   }
   public String bar(String baz) { // this method can be called by the sender
      try { homeService.foo("hello from agent"); } // can talk to sender
      catch(java.rmi.RemoteException x) { /* call home can fail */ }
      return localService.baz(baz).toString(); //can talk to receiver
   }
}
</tt></pre></blockquote>
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Design Recommendation</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               <b>Construction:</b><br>
               Begin by subclassing AbstractService into MockService(s), providing
               simple/trivial implementations of the methods. This will provide a fully
               demonstrable system, in <i>literally</i> minutes. Next, subclass the
               MockService(s) into ActualService(s), incrementally implementing
               functionality, with an eye toward always being able to demonstrate.<br><br>

               <b>Testing:</b><br>
               For such a distributed system, better than using unit tests; develop test
               services, or even <a href=http://wiki.java.net/bin/view/Communications/CajoScripting>
               scripts</a> of functional test scenarios.<br><br>

               <b>Advanced:</b><br>
               Your applications will become increasingly flexible and powerful the more you
               use <i>Interfaces,</i> rather than <i>Objects,</i> for non-primitive
               arguments, and return types.<br>
               (non-serialisable arguments and returns are transparently converted into
               <a href=http://download.oracle.com/javase/1.3/docs/guide/reflection/proxy.html>
               dynamic proxy</a> references, implementing all of the remote object's
               interfaces.)<br><br>

            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Conclusion</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               <b>Security:</b><br>
               Accepting mobile code for controllers and agents can be risky. A rogue
               object could hobble or even crash the receiving JVM simply by allocating lots
               of memory for instance. For this reason, acceptance of mobile controllers and
               agents is <i>disabled</i> by default. It should go without saying that an
               internet facing server should <u><i>not</i></u> accept mobile code. However
               inside the firewall, other servers can enable it by calling a single line of
               code.* <i>(An example of this is included in the SDK)</i> <i><u>Note</u>:</i>
               As you may have surmised; a server can <i>send</i> its controller, without
               <i>accepting</i> mobile code.<br>
               *If the controllers and agents code are in the receiving server's classpath,
               then they are not mobile by definition, rather quite static, and can be used
               without having to enable acceptance of mobile code.<br><br>

               The cajo framework is just as intuitive and easy to use to as it looks.
               All it takes to get started is to download the very small <a href=https://cajo.dev.java.net/sdk.zip>
               SDK</a> (125kB). The example source is openly licensed under the <a href=http://www.apache.org/licenses/LICENSE-2.0>
               Apache Licence 2.0</a>, and compiles and runs right out of the box. The
               autogenerated javadoc provides extremely detailed documentation. Try the SDK
               as a starting template; modify the example classes as you wish, and you can
               have your own distributed system up and running very quickly.<br><br>

            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- footer: -->
   <table width="95%" height="56" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <div align="center">
               <hr width=90%">
               <span class="spacing style4 style7 style9">
                  The goal of <a href=https://cajo.dev.java.net>the cajo project</a> SDK is to show how much is possible, so simply.
               </span>
            </div>
         </td>
      </tr>
   </table><br>

   <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="95%" valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle">
                     <span class="style11">&copy; 2010 John Catherino, <a href=license.html>GNU FDL</a></span>
                  </td>
                  <td width="53%"><div align="right"></div></td>
               </tr>
            </table>
         </td>
               <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
            </tr>
         </table>
      </td>
   </tr>
   </table>
         </td>
      </tr>
   </table>

</body>
</html>
