<html>
   <head>
      <title>The CaJo Project</title>
      <meta name="Keywords" content="cajo, rmi, java, distributed computing">
      <meta name="Description" content="Cajo Distributed Application Framework">
      <meta name="Author" content="John Catherino">
   </head>
   <body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800000" alink="#FF0000">
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td><img src="images/topl.gif" width="17" height="17" border="0"></td>
            <td width="100%" bgcolor="#8C6239"><img src="images/dot.gif" width="1" height="1" border="0"></td>
            <td><img src="images/topr.gif" width="17" height="17" border="0"></td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="100%" height="15" bgcolor="#8C6239">
               <img src="images/dot.gif" width="1" height="1" border="0">
            </td>
         </tr>
      </table>
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
         <tr>
            <td width="120" valign="top">
               <table width="120" border="0" cellspacing="2" cellpadding="2" align="left">
<!-- begin table.html -->
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="index.html" title="cajo home page"><b>Welcome</b></a><br>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="tutorial.html" title="getting started"><b>Tutorial</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="theory.html" title="how it all works"><b>Theory</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="gotcha.html" title="important details"><b>Gotchas</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="faq.html" title="common questions"><b>FAQ</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="acknowlege.html" title="supporters of the marque"><b>Acknowlegements</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="license.html" title="what's the LGPL"><b>License</b></a>
                        </font>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#C0C08D">
                        <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="-2">
                           <a href="docs/overview-summary.html" title="package documentation"><b>Javadocs</b></a>
                        </font>
                     </td>
                  </tr>
<!-- end table.html -->
               </table>
            </td>
            <td width="100%" valign="top">
               <table width="100%" cellpadding="5" border="0">
                  <tr>
                     <td>
                        <font face="Verdana, Helvetica" size="-1">
<!-- begin main.html -->
                           <font face="Verdana, Helvetica" size="4">
                              <b>Server items are the core of the cajo framework.</b>
                           </font><br><br>

                           A server is a Java Virtual Machine that makes one or more of its objects
                           remotely accessible.  A remotely accessible object is called an <b>item</b>
                           in terms of this framework. Items usually derive from the class
                           <a href= docs/gnu/cajo/utils/BaseItem.html>BaseItem</a>, though they can
                           actually be any object. Remotely accessible items are created from objects
                           using the <a href=docs/gnu/cajo/invoke/Remote.html>Remote</a> class.  Remote
                           takes the item object in its constructor, and finally implements the
                           <a href=docs/gnu/cajo/invoke/Invoke.html>Invoke</a> interface, which serves
                           to make the item object's public methods remotely callable. The Invoke
                           interface defines a single method:

                              <pre><code>   Object invoke(String method, Object args);</code></pre>

                           Remote objects call the invoke method, passing it a method name, and an
                           argument that can either be an object, and object array, or null.  The
                           invoke implementation of the Remote class uses a Java technique called
                           <i>reflection</i> whereby it finds the public method of its member object
                           matching the name provided in the remote call, accepting arguments
                           of exactly the type, and in the exact order, provided by the caller.  If
                           there is a match, it will invoke that method on the item, and return the
                           result if any. If no matching method can be found however, in method name
                           <u>and</u> argument type/order, the invocation will result in a
                           <code>NoSuchMethodException</code> being thrown at the caller.<br><br>

                           Item objects are free to implement any public, in this case meaning remotely
                           callable, methods of any type. The only requirement is that the calling
                           object from a different machine, virtual or physical, must know the item's
                           method signature. This is no different than for conventional objects with
                           two exceptions. First there is no compiletime type checking. Second, due to
                           a restriction in the Java reflection mechanism; primitive types such as
                           <code>int</code> or <code>char</code> for example, cannot be sent as
                           arguments, or returned, rather they must be sent using their object
                           representations, in this case <code>Integer</code> or <code>Character</code>.
                           This means all argument and return typechecking will be done at runtime
                           instead of compiletime.<br><br>

                           All invocations on any item should be made using its Invoke interface.  While
                           technically this technique isn't necessary when the item is local, i.e. in
                           the same Virtual Machine, it allows the called object to be moved to a
                           another machine, whether virtual or physical, with <u><b>no</b></u> source
                           code changes! A <i>highly recommended</i> design pattern is to simply place
                           a wrapper object around the item reference, where its traditional methods
                           simply pass the invocation onto the internal item reference.<br><br>

                           Consider for example:
<code><pre>
   String toString() {
      // no arguments, object return ...
      return (String)foo.invoke("toString", null);
   }
   boolean equals(Object o) {
      // single argument, primitive return...
      return ((Boolean)foo.invoke("equals", o)).booleanValue());
   }
   void someMethod(String a, String b, String c) {
      // multiple arguments, no return...
      foo.invoke("someMethod", new Object{} { a, b, c });
   }
</pre></code>
                           Object construction can be abstracted similarly:
<code><pre>
   void construct() {
      // when the item is local:
      foo = new Foo(...);
   }
   void construct() {
      // when the item is remote:
      foo = Remote.getItem("//myhost.com/foo");
   }
   void construct() {
      // when the item is a zedmob on disc:
      foo = Remote.getItem("/beans/foo.ser");
   }
</pre></code>

                           By handling items using their Invoke interface, calling objects need not know
                           or even care, if the items are local or remote. However, should it be
                           important to know the remoteness or locality of an item; it can be tested in
                           the following way:
<code><pre>
   if (foo instanceof RemoteInvoke) {
      // foo is a remote item ...
   } else {
      // foo is a local item ...
   }
</pre></code>
                           This is the sole purpose of the
                           <a href=docs/gnu/cajo/invoke/RemoteInvoke.html>RemoteInvoke</a> interface,
                           testing locality, as it is otherwise a bodyless interface. In general
                           however, locality testing should be a discouraged practice.<br><br>

                           A BaseItem can optionally define a
                           <a href= docs/gnu/cajo/utils/BaseItem.MainThread.html>MainThread</a> object,
                           which would be started automatically by the ItemServer, the on binding of the
                           item. This allows an item to perform default processing, independently of its
                           other invocation threads. Its main thread instance can be accessed via its
                           public member named <a href=docs/gnu/cajo/utils/BaseItem.html#thread>thread</a>,
                           on which it can be interrupted. In fact, the item's run method should
                           periodically monitor, to check if the thread <code>isInterrupted()</code>,
                           and perform an orderly shutdown. An item can optionally have no main thread.
                           This would be known as an <i>event-driven</i> item, meaning it executes only
                           when called by a client. <i>Note:</i> having multiple clients can cause an
                           Item's public methods to be invoked reentrantly.<br><br>

                           Ultimately that's all there is to an item. To make an item reference
                           <u>statically</u> accessible to other virtual machines, it is passed to the
                           <a href=docs/gnu/cajo/utils/ItemServer>ItemServer</a> static
                           method
                           <a href=docs/gnu/cajo/utils/ItemServer.html#bind(java.lang.Object,%20java.lang.String,%20boolean,%20gnu.cajo.utils.Multicast)>bind</a>.
                           A client application can obtain a reference to a remote item using the
                           ItemServer static method
                           <a href=docs/gnu/cajo/invoke/Remote.html#getItem(java.lang.String)>getItem</a>;
                           requesting the item by name. As a <i>de facto</i> convention, the primary
                           item served by a VM is bound under the name <i>"main"</i>. Item
                           references can also be made <u>dynamically</u> accessible using the
                           <a href=multicast.html>Multicast</a> class. Client applications can obtain
                           references to remote items using the Multicast method
                           <a href=docs/gnu/cajo/utils/Multicast.html#listen(gnu.cajo.invoke.Invoke)>listen</a>.
                           A virtual machine can remote as many items as it needs.<br><br>

                           In the next section, see how an item can use a <a href=proxy.html>proxy</a>
                           item to send some, or a majority of its functionality, and even an optional
                           graphical user interface, to a client.<br><br>
                           
                           <div align="center">
                              <font face="Verdana, Helvetica" size="-2">
                                 <hr width="80%">
                                 Items are just objects, which can be also invoked by other (remote) objects.
                              </font>
                           </div>
<!-- end main.html -->
                        </font>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
   </body>
</html>
