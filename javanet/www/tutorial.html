<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
   <title>The cajo project</title>
   <meta name="Keywords" content="cajo, rmi, java, distributed computing,
      Transparent Distributed Computing, network computing, cajo project,
      cajo framework, wwvm, John Catherino">
   <meta name="Description" content="Cajo Distributed Application Framework">
   <meta name="Author" content="John Catherino">
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <link href="ventro/css.css" rel="stylesheet" type="text/css">
</head>

<body>

<table width="98%" border="0" cellpadding="0" cellspacing="0">
   <tr>
      <table width="100%" height="67"  border="0" cellpadding="4" cellspacing="0">
         <tr>
            <td background="ventro/vert_logobarbg.gif">
               <table width="100%" height="47"  border="0" cellpadding="4" cellspacing="0">
                  <tr><br>
                     <td width="85" valign="bottom">
                        <div align="right">
                           <img src="ventro/cajologo.gif" alt="the cajo project"
                              title="cajo: free dynamic transparent distributed computing">
                           <img src="ventro/blank.gif" width="6" height="8">
                        </div>
                     </td>
                     <td width="10"><img src="ventro/seperatorline.gif" width="1" height="38"></td>
                     <td style="vertical-align:middle">
                        <span class="style8">
                           <font size="+1">
                              <b>Free, simple, powerful: Transparent Distributed Computing</b>
                           </font>
                        </span>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
      <table border="0" cellspacing="0" cellpadding="4">
         <tr>
            <td height="331" valign="top" bgcolor="#FFFFFF">
               <td width="100%" valign="top" bgcolor="#FFFFFF">
                  <table width="100%" border="0" cellpadding="4" cellspacing="0" bgcolor="#FFFFFF">
                     <tr>
                        <td>
                           <table width="100%" height="35" border="0" cellpadding="0" cellspacing="0">
                              <tr>
                                 <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
                                 <td background="ventro/bar_bg.gif">
                                    <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
                                       <tr>
                                          <td style="vertical-align:middle">
                                             <span class="style8 style12">
<!-- main page title bar -->                    <div align="left">Exploring the cajo framework</div>
                                             </span>
                                          </td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
                              </tr>
                           </table>
                           <table border="0" cellpadding="9" cellspacing="0">
                              <tr>
                                 <td valign="top">
<!-- title bar section -->         <span class="spacing style4 style7 style9">
                                      This page will help to get you up and running as quickly as possible.  Once
                                      you understand its basic components, the possibilities become truly
                                      limitless.<br><br>

                                      The tutorial will start by describing the <a href="#directory">directory</a>
                                      structure project and its components. Next it will move on to
                                      <a href=#building>building</a> and <a href=#launching>launching</a> the
                                      example server, and their related options.  It will conclude by describing
                                      the ways of <a href=#connecting>connecting</a> to the server. This should
                                      provide a fairly complete introduction to the overall use of the framework.<br><br>

                                      <i><u>Note</u>:</i> to best follow along, please download and unzip the
                                      project <a href=cajo.zip>source</a> code.<br>

                                    </span>
                                 </td>
                              </tr>
                           </table></td>
                        </tr>
                     </table>


<!-- begin regular section -->
   <table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table height="31" border="0" cellpadding="0" cellspacing="0">
               <tr><a id="directory"></a>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Directory Structure</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table width="98%" height="96" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               The project is organised into the following directories:

<blockquote><tt><pre>
/cajo         // install directory
|- /gnu       // GNU root namespace
|
|-- /cajo     // project namespace
|--- /invoke  // architecture core
|--- /utils   // framework of tools
|---- /extra  // for later study...
|
|- /example   // project example
|-- /include  // proxy resource repository
|-- /gui      // proxy graphical widgets
|
|- /docs      // documentation collection
</b></pre></tt></blockquote>

               The <a href=docs/overview-summary.html#overview_description>cajo</a> install
               directory contains several important files, all of these will be covered in
               the course of this tutorial.  For now, the most important file is either
               doc.bat, or build.xml. Invoking either the batch file, or the doc Ant target,
               will scan the project source, and create highly detailed javadoc hypertext
               documents in the docs subdirectory.  This will be a <u>very</u> valuable
               resource in your development activities. Nearly half of the source code is
               documentation comments! You can view this helpful resource by opening the
               file docs/index.html with your favourite browser.<br><br>

               The <a href=docs/gnu/cajo/invoke/package-summary.html>gnu/cajo/invoke</a>
               directory houses the three core classes of this framework's architecture.
               Its files are described at length in the javadoc pages. For now suffice it
               to say that it defines the standard interface through which all cajo objects
               communicate.<br><br>

               The <a href=docs/gnu/cajo/utils/package-summary.html>gnu/cajo/utils</a>
               directory applies the invoke package to create the framework. Likewise, these
               files are covered in detail in the javadoc pages. For now it can be summarised
               as providing a collection of classes used in the creation of servers.<br><br>

               The <a href=source/browse/cajo/example>cajo/example</a> directory contains
               the four Java classes comprising the sample server.  The file Main.java is
               the server application itself. The file TestItem is an item, meaning a
               server-side resource object, which is accessible to remote applications.  The
               file TestProxy is a proxy, meaning a mobile functional object, which is sent
               to remote clients, and communicates back to its item. Server objects can be
               made that do not use proxies, it is included to demonstrate how to make one,
               and what it does. Finally there is the file Builder.java.  Strictly speaking
               the example could have been made without this class also, but it is here to
               demonstrate the process of configuring proxies at compile time, rather than
               runtime.  It's a little extra work, but it can make the proxies a lot
               smaller, simpler, and more secure.<br><br>

               The <a href=source/browse/cajo/example/include>cajo/example/include</a>
               directory contains miscellaneous data resources used by the proxy. This
               includes things like properties tables for multiple language support,
               graphical bitmaps. Essentially it is any non-Java files required for
               operation of the proxy at its remote host. It is put in its own directory
               so that it can be included into the proxy's jar file with a simple *.*
               option.<br><br>

               The <a href=source/browse/cajo/example/gui>cajo/example/gui</a> directory
               contains a small collection of graphical widgets used by the proxy to
               create its user interface on hosting clients. They are outside the scope
               of this project as a proxy is free to use the AWT, or Swing, or anything
               else. Please don't think this is the graphical toolkit you have to use, it
               is here only for the purposes of this example, and doesn't even merit more
               detailed examination.<br><br>

               The <docs/index.html>cajo/docs</a> directory, as mentioned previously, is
               where the auto-generated documentation goes.  To save space, initially it
               does not exist, until you run the doc build.<br><br>

               <i><u>Note</u>:</i> there is also a directory <a href=docs/gnu/cajo/utils/extra/package-summary.html>
               gnu/cajo/utils/extra</a>. It contains powerful applications of the framework,
               for later study. Its <a href=http://wiki.java.net/bin/view/Communications/ExtensionPackage>
               description</a> will be set aside at this time, as it is not used by the
               example.<br>

            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table height="31" border="0" cellpadding="0" cellspacing="0">
               <tr><a id="building"></a>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Building the example</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               There are four distinct ways to build the example, represented by the four
               batch files: make1, make2, make3, and make4; and their corresponding targets
               in the build.xml ant script. Each builds the server with identical
               functionality, however, packaged in <i>fundamentally</i> different ways.<br><br>

               The <a href=source/browse/cajo/make1.bat?rev=1.6>make1</a> creates the server
               in <b><i>one</i></b> monolithic jar file. Everything is contained inside it,
               the server itself, the test item, the test proxy, and even a client applet,
               which allows browsers to host the proxy. This file, and the security.policy
               file are all that is needed to deploy the server.  All servers use the same
               policy file by default, so a deployment directory could consist of many
               server jars, and a single policy file.  This is an important part of the
               paradigm; to allow complex functionality to be modularised into multiple
               Virtual Machines seamlessly working together. <i>Note:</i> If you should need
               separate policy files for each server, simply place each server jar and its
               associated policy into separate directories.<br><br>

               The <a href=https:source/browse/cajo/make2.bat?rev=1.6>make2</a> creates the
               server in <b><i>two</i></b> files: server.jar <i>and</i> client.jar. The
               client.jar is a stand-alone generic client application, in addition, it is
               <i>also</i> a generic proxy hosting Applet. Deployment now consists of the
               server jar, the client jar, and the policy file. All servers built this way
               reference the same client jar, in the same way as they all reference the same
               policy file. A stand-alone client not only reduces the server jar file size,
               which can be helpful if there are many servers in the same directory, it is
               also very useful in its own right. Using the standard <a href=client.html>
               client</a> is a topic of its own, and as such gets its own page.<br><br>

               The <a href=source/browse/cajo/make3.bat?rev=1.6>make3</a> creates the server
               as <b><i>three</i></b> files: server.jar, client.jar, <i>and</i> proxy.jar.
               Now deployment consists of four files, the three jars, and the policy file.
               The reason to use make3, is if you want to take advantage of the <i>'hot
               plugging'</i> capability of the framework. This means you can modify the
               proxy, or proxies, recompile their jar file(s), and overwrite the existing
               proxy jars, all while the server is <i>still</i> running! All subsequent
               clients will receive the updated functionality automatically, and the server
               need <u>not</u> be shut down.<br><br>

               The <a href=source/browse/cajo/make4.bat?rev=1.5&view=markup>make4</a> creates
               the server as <b><i>four</i></b> files: server.jar, client.jar, proxy.jar,
               <i>and</i> cajo.jar. The cajo.jar file is the standard binary library for the
               cajo project. By using this jar file, all of the standard functionality is
               stored in one central repository. This not only reduces the size of the
               server jar files, but permits library updates <i>without</i> affecting the
               server files. This is the most common method of deployment.<br><br>

               As you would expect, there is a fifth batch file, and default ant build
               target; called <a href=../library.bat>library</a>. It compiles the project
               source code and creates the standard cajo.jar library image. Its purpose is
               to provide the framework functionality to multi-jar classpaths, used by the
               majority of applications.<br>

            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr><a id="launching"></a>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Launching the example</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               Once you have built the example, launching it can be as simple as executing
               the following command:<br>
               <pre>    <code>java -jar server.jar</code></pre>
               This will start the server using its default settings:<ul>
                  <li>client and proxy code delivery on TCP port 80
                  <li>server item communication on TCP port 1099
                  <li>hostname is identical both inside and outside subnet
                  <li>default server network interface is being used
                  <li>the server port is the same both inside and outside the subnet
               </ul>This should suffice for many users, however these five assumptions can
               be overridden, as command line arguments. The options above progress from
               most likely to need overriding, to least.<br><br>

               <b>1.</b> Typically the first problem hit by most users is that port 80 is
               not available. This can be for a variety of reasons; there is already an http
               server running on the box, or you are using a *nix system and you are not
               root, in any case, you are forced to select another port.  Fortunately this
               is the first command argument. In this case, you will have to do something
               like this:

               <pre>    <code>java -jar server.jar 8080</code></pre>

               This will start the http service for the client and proxy code on port 8080.
               The only real impact is that the port must now be explicitly specified by
               the client when connecting to the server, as it is no longer default. This
               detail will be covered in the next section, <a href=tutorial.html#connecting>
               connecting</a>.<br><br>

               <b>2.</b> Often the next problem hit is that port 1099 is not available. Typically
               this is because a central rmiregistry is running on the machine.  By default,
               each cajo server uses its own rmiregistry, operating on the same port as the
               interface to its items.  In any case, another port must be selected:

               <pre>    <code>java -jar server.jar 8080 1234</code></pre>

               This means that clients connect to this server on port 1234. <i>Note:</i>
               the order and precedence of the arguments is required, meaning that if you
               want to specify the server port, you must also specify the http port. (yes,
               arguments could be handled in a more sophisticated fashion, but this is only
               an <i>example</i> program)<br><br>

               <b>3.</b> The next most common problem is that your server is behind a NAT router.
               This happens, for example, when you want to share a single connection to the
               internet.  Essentially, the NAT router is giving you a <i>'fake'</i> IP
               address valid only inside the subnet. It translates the addresses for you,
               and everyone else sharing the connection, to the actual network address.
               This means you need to know your outside IP address.  There are simple
               programs to tell you your actual IP address.  A very easy method to find
               it is to just visit <a href=http://ipchicken.com target=_blank>ipchicken</a>.
               Another highly recommended option, if you are going to be serving a lot, is
               to get a domain name.  This is not nearly as difficult or expensive as it
               sounds. If you are willing to share one, it is very easy to get one for
               <i>free</i>.  One handy place to do this is <a href=http://www.dyndns.org target=_blank>
               dyndns</a>.  There you can register a name, something like
               yourhost.dyndns.com, and they even have a variety of utilities you can run
               to make sure that name always resolves to your host, even if your ISP is
               constantly changing your address! If you want to get <i>really</i> fancy,
               you can always buy your own registered domain name. Anyway, now you will have
               a command line that looks something like this:

               <pre>    <code>java -jar server.jar 8080 1234 yourhost.dyndns.com</code></pre>
               -or-
               <pre>    <code>java -jar server.jar 8080 1234 123.123.123.123</code></pre>

               Now clients will correctly connect to you on your actual address, not the
               internal one that the NAT router gave your host.<br><br>

               <b>4.</b> Next, lets assume your computer has two network adapters; a wired
               connection to your LAN, and a wireless connection to the internet.  You may
               want to specify on which IP address, in this case <i>physical</i> network
               interface, you want to run.  Otherwise, it will operate on all of them, by
               default. To do this you would specify the <i>local</i> interface address,
               even if it is running behind NAT.  This would be your command line now:

               <pre>    <code>java -jar server.jar 8080 1234 123.123.123.123 100.100.100.100</code></pre>

               This would also be required if your machine is multi-homed, i.e. has multiple
               <i>logical</i> network interfaces.  Generally speaking, multi-homing is guru
               magic, if you don't know what the term means, it most likely doesn't apply to
               you.<br><br>

               <b>5.</b> The final, and most <i>obscure</i> option, is used to support port
               forwarding. Essentially, this is needed when a router is publicly taking
               connections on one port, and routing it to your internal machine, on another.
               In this case you would specify the <i>outside</i> port. As the last option,
               you have probably already guessed it; port forwarding is <i>advanced</i> guru
               magic. If you are doing this, you already know what the command line would
               look like; but just for the rest of us, here it is:

               <pre>    <code>java -jar server.jar 8080 1234 guru.org 100.100.100.100 4321</code></pre>

               Here a client connecting on port 4321 of the public address guru.org actually
               connects to some internal machine at 100.100.100.100 on its port 1234.
               In this case, if none of this makes any sense, it <i>definitely</i> doesn't
               apply to you.<br>
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="98%" valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr><a id="connecting"></a>
                  <td style="vertical-align:middle">
                     <span class="style8"><b>Connecting to the server</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               Connecting to this example is generally done using a browser.  You will need
               to have the Java Plug-In installed, if you don't the server will cause your
               browser prompt you if it can install it automatically. This is done to make
               connections easy for end users, who may be technically unsophisticated.
               Just as with launching the application, connecting could be as simple as
               pointing your browser to:

               <pre>    <code>http://yourserver</code></pre>

               The proxy, which is graphical, will load and appear inside your browser,
               full screen and dynamically resizable.<br><br>

               Just as with the server, there are a similar set of options to configure the
               client. This time let's start with the complete URL, then explain its optional
               components:

               <pre>    <code>http://serverHost[:serverPort]/[clientPort][:localPort][-proxyName][!]</code></pre>

               <ul>
                  <li>The <b>serverPort</b> value is specified when port 80 was not abvailable
                      for the server. Unspecified, it will be port 80. In our example with the
                      server options, it would be 8080.

                  <li>The <b>clientPort</b> value would indicate the inbound TCP port on which
                      the client would like to receive the server callbacks.  This would need to be
                      specified if the client was behind a firewall.  Unspecified it would be
                      anonymous, meaning randomly chosen by the client, at runtime.

                  <li>The <b>:localPort</b> value would be the client's internal port number if
                      it is being translated from the external port number.  Unspecified it will be
                      the same as clientPort. <i>Very few</i> people will ever need this option.

                  <li>The <b>-proxyName</b> value would be used when the server binds more than
                      one item.  This is the name under which the item would be bound in the
                      registry. Unspecified the name "main" will be used, as servers typically bind
                      their default item under that name.

                  <li>The <b>!</b> option will cause the client application to launch as a WebStart
                      application. Around here, we like to call it starting the application with a
                      <i>bang!</i>
               </ul>

               The server will correctly configure the client's remaining communications
               settings, even when the client is operating behind a NAT router.<br><br>

               Connecting can also be done using the generic <a href=client.html>
               client</a> application. It is <i>highly recommended</i> to use the client
               application for server development purposes.<br>
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- begin regular section -->
   <table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="98%" valign="top" background="ventro/bar_bg.gif">
            <table height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle"><span class="style8">
                     <b>Conclusion</b></span>
                  </td>
               </tr>
            </table>
         </td>
         <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td>
      </tr>
   </table>
   <table border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <span class="spacing style4 style7 style9">
               The example will provide a client proxy looking something like this:<br><br>
               <table>
                  <tr>
                     <td>
                        <img src="images/applet.gif" alt="cajo generic client applet"
                           title="cajo client applet">
                     </td>
                     <td>
                        <a href=http://jars.developer.com/other/resource.php/26743 title="cajo JARS Review">
                           <img src="images/r750.gif" alt="cajo rated JARS top 25%" title="cajo example rating">
                        </a>
                     </td>
                  </tr>
               </table><br>

               While the server console will look rather like this:<br><br>

               <img src="images/console.gif" alt="cajo example server"
                  title="cajo server example"><br><br>

               This is the proverbial tip of the iceberg, but it should get you started.
               If you have further questions, there are <a href=https://cajo.dev.java.net/servlets/ProjectForumView>
               fora</a> for this project. However, before posting, please do your <a href=http://catb.org/~esr/faqs/smart-questions.html target=_blank>
               homework</a>. (<i><u>Note</u>:</i> the previously cited link is <i>not</i>
               part of this project, rather it is provided purely for insight) Most often,
               the answer you are seeking can can be found in the source documentation, or
               right here on this site, and usually <i>much</i> faster. Otherwise, your
               questions, comments, and suggestions, are all most welcome.
            </span>
         </td>
      </tr>
   </table>
<!-- end regular section -->

<!-- footer: -->
   <table width="95%" border="0" align="center" cellpadding="9" cellspacing="0">
      <tr>
         <td valign="top">
            <div align="center">
               <hr width=90%">
               <span class="spacing style4 style7 style9">
                  The deeper you look, the more of the framework's power reveals itself to you.
               </span>
            </div>
         </td>
      </tr>
   </table><br>

   <table width="98%" height="35" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
         <td width="2%" background="ventro/bar_bg.gif"><img src="ventro/arrowed.gif" width="30" height="35"></td>
         <td width="95%" valign="top" background="ventro/bar_bg.gif">
            <table width="100%" height="31" border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td style="vertical-align:middle"><span class="style11">&copy; 2004 John Catherino, <a href=license.html>GNU FDL</a></span></td>
                  <td width="53%"><div align="right"></div></td></tr></table></td>
                  <td width="3%"><img src="ventro/bar_Right.gif" width="10" height="35"></td></tr></table></td>
               </tr>
            </table>
         </td>
      </tr>
   </table>

</body>
</html>
